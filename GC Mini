A) CONTEXT
Feature Supported: Real-time court slot availability and instant cost estimation. Players can instantly verify if a court is available at a chosen time and see how much the booking would cost before proceeding. It prevents double-bookings, saves time, and highlights Courtify’s core value — verified availability and transparent pricing.

B) API FUNCTIONS

1. Validate/Check — Check if a facility’s court is available for a specific date and time.
2. Calculate/Estimate — Compute estimated booking cost based on facility hourly rate and duration.

C) ENDPOINT MINI-SPEC

1. POST /api/availability/check
   Purpose: Given a facility, date, start time, and duration, determine if the slot is available. If unavailable, suggest the next free slot.

Sample Request Body:
{
"facilityId": "courtify-sportsplex",
"date": "2025-10-10",
"startTime": "09:00",
"durationMinutes": 60
}

Sample Success Response (Available):
{
"facilityId": "courtify-sportsplex",
"date": "2025-10-10",
"startTime": "09:00",
"endTime": "10:00",
"isAvailable": true
}

Sample Success Response (Conflict):
{
"facilityId": "courtify-sportsplex",
"date": "2025-10-10",
"startTime": "10:30",
"endTime": "11:30",
"isAvailable": false,
"conflict": { "start": "10:00", "end": "11:30" },
"nextAvailable": { "startTime": "11:30", "endTime": "12:30" }
}

2. POST /api/booking/estimate
   Purpose: Given a facility and duration, return an estimated price based on the facility’s hourly rate.

Sample Request Body:
{
"facilityId": "courtify-sportsplex",
"durationMinutes": 90
}

Sample Success Response:
{
"facilityId": "courtify-sportsplex",
"hourlyRate": 500,
"durationMinutes": 90,
"estimatedPrice": 750,
"currency": "PHP"
}

ERROR RESPONSES
400 - Missing required fields
Example: { "message": "facilityId is required" }

422 - Invalid input or past date
Example: { "message": "durationMinutes must be integer ≥ 30" }

404 - Facility not found
Example: { "message": "facility not found" }

409 - Slot conflict (optional)
Example: { "message": "Court is not available at the requested time." }

500 - Internal server error
Example: { "message": "Something went wrong." }

VALIDATION RULES

* facilityId: required, must exist in the data source
* date: required, ISO YYYY-MM-DD, cannot be in the past
* startTime: required for availability, format HH:mm (24-hour)
* durationMinutes: integer ≥ 30
* Requested time window must be within open hours

DATA SOURCE

* In-memory JSON data (no external database or API)

NON-GOALS

1. No authentication or user accounts
2. No payment processing or booking persistence
3. No timezone adjustments or multiple facilities management

D) TEST PLAN
Happy Path:
POST /api/availability/check with valid data should return 200 OK and "isAvailable": true

Error Path:
POST /api/availability/check missing "facilityId" should return 400 with { "message": "facilityId is required" }
